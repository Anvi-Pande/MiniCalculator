#include <iostream>
#include <cmath>
using namespace std;

int factorial(int n) {
    if (n < 0) {
        cout << "Error: Factorial of negative number is undefined!" << endl;
        return -1;
    }
    int fact = 1;
    for (int i = 1; i <= n; i++) {
        fact *= i;
    }
    return fact;
}

double square(double n) {
    return n * n;
}

double squareRoot(double n) {
    if (n < 0) {
        cout << "Error: Cannot take square root of negative number!" << endl;
        return -1;
    }
    return sqrt(n);
}

int main() {
    cout << "~~~~~~Mini Calculator~~~~~~" << endl;

    double num1, num2;
    char op;
    double result;

    cout << "Enter a number: ";
    cin >> num1;
    cout << "Enter an operator (Addition(+), Subtraction (-), Multiplication (*), Division (/), Power (^), Root (r), Factorial (!), Square (s), Square Root (q): ";
    cin >> op;

    if (op == '+' || op == '-' || op == '*' || op == '/' || op == '^' || op == 'r') {
        cout << "Enter another number: ";
        cin >> num2;
    }

    if (op == '+') result = num1 + num2;
    else if (op == '-') result = num1 - num2;
    else if (op == '*') result = num1 * num2;
    else if (op == '/') {
        if (num2 == 0) {
            cout << "Error: Division by zero!" << endl;
            return 0;
        }
        result = num1 / num2;
    }
    else if (op == '^') result = pow(num1, num2);
    else if (op == 'r') {
        if (num2 == 0) {
            cout << "Error: Root degree cannot be zero!" << endl;
            return 0;
        }
        result = pow(num1, 1.0 / num2);
    }
    else if (op == '!') {
        result = factorial((int)num1);
        if (result != -1) {
            cout << num1 << "! = " << result << endl;
        }
        return 0;
    }
    else if (op == 's') {
        result = square(num1);
        cout << num1 << " squared = " << result << endl;
        return 0;
    }
    else if (op == 'q') {
        result = squareRoot(num1);
        if (result != -1)
            cout << "Square root of " << num1 << " = " << result << endl;
        return 0;
    }
    else {
        cout << "Error: Invalid operator!" << endl;
        return 0;
    }

    
    cout << "Equation: " << num1 << " " << op << " " << num2 << " = " << result << endl;
    return 0;
}

